{"title":"Methods","markdown":{"yaml":{"title":"Methods","format":{"html":{"embed-resources":true,"toc":true,"toc-depth":3,"css":["styles/custom.css","styles/about-page.css","styles/dashboard-page.css"],"self-contained":true,"include-in-header":{"text":"<script src=\"https://cdn.jsdelivr.net/npm/vega@5\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/vega-lite@5\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/vega-embed@6\"></script>\n<style>\n  /* Critical styles for visualization containers */\n  .chart-container {\n    width: 100%;\n    height: 550px;\n    min-height: 400px;\n    margin: 1.5rem 0;\n  }\n\n  .iframe-container {\n    width: 100%;\n    height: 650px;\n    margin: 1.5rem 0;\n    border: 1px solid #eaeaea;\n    border-radius: 8px;\n    overflow: hidden;\n  }\n\n  .iframe-container iframe {\n    width: 100% !important;\n    height: 100% !important;\n    border: none;\n  }\n\n  .vega-embed {\n    width: 100%;\n    height: 100%;\n  }\n\n  .iframe-viz {\n    width: 100%;\n    height: 500px;\n    border: none;\n    overflow: hidden;\n  }\n</style>\n"}}},"execute":{"echo":false,"warning":false,"error":false}},"headingText":"Set up path and environment","containsRefs":false,"markdown":"\n\n\n```{python}\n#| include: false\nimport sys\nimport os\nimport altair as alt\n\nsys.path.append(os.path.abspath(\".\"))\nalt.renderers.enable('default')\nos.makedirs(\"outputs\", exist_ok=True)\n\n# Import visualization functions\nfrom py.photo_effect_plot import plot_photo_effect\nfrom py.case_type_bar import plot_case_type\nfrom py.income_dot_map import plot_income_dot_map\nfrom py.income_choropleth import plot_income_choropleth\nfrom py.subset_selection_plot import plot_subset_selection\n\n# Pre-generate all HTML files to ensure they exist\n_ = plot_photo_effect()\n_ = plot_case_type()\n_ = plot_income_dot_map()\n_ = plot_income_choropleth()\n_ = plot_subset_selection()\n```\n\n# Behind the Dashboard: Our Analytical Journey\n\nWe approached this project as storytellers, not just statisticians. Our goal wasn't just to model numbers ‚Äî it was to uncover patterns of equity and inequality in the delivery of public services. Here's how we did it.\n\n<div class=\"centered-image\">\n  <img src=\"assets/images/pothole_example.jpg\" alt=\"Pothole request photo\">\n  <p class=\"image-caption\">Every data point begins with a real request, like this pothole report from SF 311.</p>\n</div>\n\n<div class=\"section-break\"></div>\n\n## 1. Exploratory Data Analysis (EDA)\n\nWe started by letting the data speak.\n\n- How often are cases opened in each neighborhood?\n- Are certain types resolved more reliably?\n- Does submitting a photo really help?\n\nWe used bar charts, dot maps, and choropleths to bring these questions to life.\n\n<div class=\"centered-image\">\n  <img src=\"assets/images/static_viz/resolution_rate_by_selected_case_types.png\" alt=\"Resolution Rate by Case Type\">\n  <p class=\"image-caption\">Case type matters: Some requests are always resolved. Others? Almost never.</p>\n</div>\n\n<div class=\"section-break\"></div>\n\n## 2. Hypothesis Testing\n\nVisuals gave us clues. Statistics gave us confidence.\n\n<div class=\"method-box\">\n  <h4>Statistical Tests</h4>\n  <p><strong>Wilcoxon Rank Sum Test</strong><br>\n  ‚Üí Confirmed: Photo submissions lead to faster resolutions (<strong>p < 0.001</strong>)</p>\n\n  <p><strong>Chi-Squared Test</strong><br>\n  ‚Üí Confirmed: Photo presence significantly associated with resolution success</p>\n</div>\n\nWe also observed race-based differences that demanded closer modeling attention.\n\n<div class=\"section-break\"></div>\n\n## 3. Regression Modeling\n\nWe needed to go deeper.\n\n<div class=\"method-box\">\n  <h4>Modeling Approaches</h4>\n  \n  <p><strong>Negative Binomial Regression</strong></p>\n  <ul>\n    <li>Modeled <strong>counts of cases</strong> per neighborhood</li>\n    <li>Controlled for overdispersion</li>\n    <li>Revealed: Case type, income, and demographics significantly affect service likelihood</li>\n  </ul>\n  \n  <p><strong>Ridge & Lasso Regression</strong></p>\n  <ul>\n    <li>Modeled <strong>resolution rates</strong></li>\n    <li>Addressed multicollinearity in demographic predictors</li>\n    <li>Lasso shrank complexity, Ridge gave robustness</li>\n  </ul>\n</div>\n\n<div class=\"centered-image\">\n  <img src=\"assets/images/static_viz/correlation_heatmap_r2_annotated_only.png\" alt=\"Correlation heatmap\">\n  <p class=\"image-caption\">Income and race correlate strongly with resolution rates ‚Äî but correlation isn't causation.</p>\n</div>\n\n<div class=\"section-break\"></div>\n\n## 4. Feature Selection\n\nWe tested dozens of combinations to balance complexity and explanatory power.\n\n<iframe src=\"outputs/subset_selection_chart.html\" class=\"iframe-viz\" style=\"height: 450px; overflow: hidden;\"></iframe>\n\n<div class=\"download-link\">\n  <a href=\"outputs/subset_selection_chart.html\" download>Download interactive chart as HTML</a>\n</div>\n\n<div class=\"section-break\"></div>\n\n## 5. Geospatial Methods\n\nPlace matters.\n\n<div class=\"method-box\">\n  <h4>Geospatial Visualization Techniques</h4>\n  <p><strong>Dot Map</strong> - Shows income per neighborhood at its centroid</p>\n</div>\n\n<iframe src=\"outputs/income_dot_map.html\" class=\"iframe-viz\" style=\"height: 600px;\"></iframe>\n\n<div class=\"download-link\">\n  <a href=\"outputs/income_dot_map.html\" download>Download interactive chart as HTML</a>\n</div>\n\n<div class=\"section-break\"></div>\n\n<div class=\"method-box\">\n  <h4>Choropleth Mapping</h4>\n  <p><strong>Choropleth</strong> - Visualizes income inequality across geographic boundaries</p>\n</div>\n\n<iframe src=\"outputs/income_choropleth.html\" class=\"iframe-viz\" style=\"width:100%; height:500px; border:none;\"></iframe>\n\n<div class=\"download-link\">\n  <a href=\"outputs/income_choropleth.html\" download>Download map as HTML</a>\n</div>\n\n<div class=\"section-break\"></div>\n\n## 6. JavaScript Interactivity\n\nData alone isn't enough ‚Äî it must engage.\n\n<div class=\"method-box\">\n  <h4>Interactive Components</h4>\n  \n  <p><strong>D3 Resolution Map</strong></p>\n  <p>An interactive map powered by D3.js lets users:</p>\n  <ul>\n    <li>Hover to see neighborhood data</li>\n    <li>Toggle by photo evidence</li>\n    <li>Reveal hotspots of inefficiency</li>\n  </ul>\n  <p class=\"file-path\">üìÅ Source: js/resolution_map.js</p>\n  \n  <p><strong>Visualization Gallery</strong></p>\n  <p>Like a visual journal, our gallery uses JavaScript + JSON to filter and zoom through our EDA snapshots.</p>\n  <p class=\"file-path\">üìÅ Code: js/gallery.js</p>\n  <p class=\"file-path\">üìÅ Data: data/data_gallery_info.json</p>\n  <p class=\"file-path\">üìÅ Images: assets/images/static_viz/</p>\n  \n  <p><strong>Interactive Quiz</strong></p>\n  <p>We built a custom JavaScript quiz that:</p>\n  <ul>\n    <li>Randomly picks 3 questions per attempt</li>\n    <li>Celebrates correct answers with confetti üéâ</li>\n    <li>Offers supportive feedback and replay</li>\n  </ul>\n  <p class=\"file-path\">üìÅ File: quiz.qmd</p>\n  <p class=\"file-path\">üéâ Library: canvas-confetti</p>\n</div>\n\n<div class=\"section-break\"></div>\n\n## Tools and Technology\n\nWe stitched this project together with care ‚Äî and code:\n\n<div class=\"method-box\">\n  <h4>Tech Stack</h4>\n  <ul>\n    <li><strong>Languages</strong>: Python + R + JavaScript</li>\n    <li><strong>Python</strong>: Altair, Pandas, Folium, GeoPandas, SciPy, Statsmodels</li>\n    <li><strong>R</strong>: <code>glmnet</code>, <code>MASS</code>, <code>ggplot2</code></li>\n    <li><strong>JS</strong>: D3.js, plain DOM scripting</li>\n  </ul>\n</div>\n\n<div class=\"qr-container\">\n  <img src=\"assets/images/qr_code.jpg\" alt=\"QR code to open dashboard\">\n  <p>Scan to access the live dashboard and explore the story yourself.</p>\n</div>","srcMarkdownNoYaml":"\n\n\n```{python}\n#| include: false\nimport sys\nimport os\nimport altair as alt\n\n# Set up path and environment\nsys.path.append(os.path.abspath(\".\"))\nalt.renderers.enable('default')\nos.makedirs(\"outputs\", exist_ok=True)\n\n# Import visualization functions\nfrom py.photo_effect_plot import plot_photo_effect\nfrom py.case_type_bar import plot_case_type\nfrom py.income_dot_map import plot_income_dot_map\nfrom py.income_choropleth import plot_income_choropleth\nfrom py.subset_selection_plot import plot_subset_selection\n\n# Pre-generate all HTML files to ensure they exist\n_ = plot_photo_effect()\n_ = plot_case_type()\n_ = plot_income_dot_map()\n_ = plot_income_choropleth()\n_ = plot_subset_selection()\n```\n\n# Behind the Dashboard: Our Analytical Journey\n\nWe approached this project as storytellers, not just statisticians. Our goal wasn't just to model numbers ‚Äî it was to uncover patterns of equity and inequality in the delivery of public services. Here's how we did it.\n\n<div class=\"centered-image\">\n  <img src=\"assets/images/pothole_example.jpg\" alt=\"Pothole request photo\">\n  <p class=\"image-caption\">Every data point begins with a real request, like this pothole report from SF 311.</p>\n</div>\n\n<div class=\"section-break\"></div>\n\n## 1. Exploratory Data Analysis (EDA)\n\nWe started by letting the data speak.\n\n- How often are cases opened in each neighborhood?\n- Are certain types resolved more reliably?\n- Does submitting a photo really help?\n\nWe used bar charts, dot maps, and choropleths to bring these questions to life.\n\n<div class=\"centered-image\">\n  <img src=\"assets/images/static_viz/resolution_rate_by_selected_case_types.png\" alt=\"Resolution Rate by Case Type\">\n  <p class=\"image-caption\">Case type matters: Some requests are always resolved. Others? Almost never.</p>\n</div>\n\n<div class=\"section-break\"></div>\n\n## 2. Hypothesis Testing\n\nVisuals gave us clues. Statistics gave us confidence.\n\n<div class=\"method-box\">\n  <h4>Statistical Tests</h4>\n  <p><strong>Wilcoxon Rank Sum Test</strong><br>\n  ‚Üí Confirmed: Photo submissions lead to faster resolutions (<strong>p < 0.001</strong>)</p>\n\n  <p><strong>Chi-Squared Test</strong><br>\n  ‚Üí Confirmed: Photo presence significantly associated with resolution success</p>\n</div>\n\nWe also observed race-based differences that demanded closer modeling attention.\n\n<div class=\"section-break\"></div>\n\n## 3. Regression Modeling\n\nWe needed to go deeper.\n\n<div class=\"method-box\">\n  <h4>Modeling Approaches</h4>\n  \n  <p><strong>Negative Binomial Regression</strong></p>\n  <ul>\n    <li>Modeled <strong>counts of cases</strong> per neighborhood</li>\n    <li>Controlled for overdispersion</li>\n    <li>Revealed: Case type, income, and demographics significantly affect service likelihood</li>\n  </ul>\n  \n  <p><strong>Ridge & Lasso Regression</strong></p>\n  <ul>\n    <li>Modeled <strong>resolution rates</strong></li>\n    <li>Addressed multicollinearity in demographic predictors</li>\n    <li>Lasso shrank complexity, Ridge gave robustness</li>\n  </ul>\n</div>\n\n<div class=\"centered-image\">\n  <img src=\"assets/images/static_viz/correlation_heatmap_r2_annotated_only.png\" alt=\"Correlation heatmap\">\n  <p class=\"image-caption\">Income and race correlate strongly with resolution rates ‚Äî but correlation isn't causation.</p>\n</div>\n\n<div class=\"section-break\"></div>\n\n## 4. Feature Selection\n\nWe tested dozens of combinations to balance complexity and explanatory power.\n\n<iframe src=\"outputs/subset_selection_chart.html\" class=\"iframe-viz\" style=\"height: 450px; overflow: hidden;\"></iframe>\n\n<div class=\"download-link\">\n  <a href=\"outputs/subset_selection_chart.html\" download>Download interactive chart as HTML</a>\n</div>\n\n<div class=\"section-break\"></div>\n\n## 5. Geospatial Methods\n\nPlace matters.\n\n<div class=\"method-box\">\n  <h4>Geospatial Visualization Techniques</h4>\n  <p><strong>Dot Map</strong> - Shows income per neighborhood at its centroid</p>\n</div>\n\n<iframe src=\"outputs/income_dot_map.html\" class=\"iframe-viz\" style=\"height: 600px;\"></iframe>\n\n<div class=\"download-link\">\n  <a href=\"outputs/income_dot_map.html\" download>Download interactive chart as HTML</a>\n</div>\n\n<div class=\"section-break\"></div>\n\n<div class=\"method-box\">\n  <h4>Choropleth Mapping</h4>\n  <p><strong>Choropleth</strong> - Visualizes income inequality across geographic boundaries</p>\n</div>\n\n<iframe src=\"outputs/income_choropleth.html\" class=\"iframe-viz\" style=\"width:100%; height:500px; border:none;\"></iframe>\n\n<div class=\"download-link\">\n  <a href=\"outputs/income_choropleth.html\" download>Download map as HTML</a>\n</div>\n\n<div class=\"section-break\"></div>\n\n## 6. JavaScript Interactivity\n\nData alone isn't enough ‚Äî it must engage.\n\n<div class=\"method-box\">\n  <h4>Interactive Components</h4>\n  \n  <p><strong>D3 Resolution Map</strong></p>\n  <p>An interactive map powered by D3.js lets users:</p>\n  <ul>\n    <li>Hover to see neighborhood data</li>\n    <li>Toggle by photo evidence</li>\n    <li>Reveal hotspots of inefficiency</li>\n  </ul>\n  <p class=\"file-path\">üìÅ Source: js/resolution_map.js</p>\n  \n  <p><strong>Visualization Gallery</strong></p>\n  <p>Like a visual journal, our gallery uses JavaScript + JSON to filter and zoom through our EDA snapshots.</p>\n  <p class=\"file-path\">üìÅ Code: js/gallery.js</p>\n  <p class=\"file-path\">üìÅ Data: data/data_gallery_info.json</p>\n  <p class=\"file-path\">üìÅ Images: assets/images/static_viz/</p>\n  \n  <p><strong>Interactive Quiz</strong></p>\n  <p>We built a custom JavaScript quiz that:</p>\n  <ul>\n    <li>Randomly picks 3 questions per attempt</li>\n    <li>Celebrates correct answers with confetti üéâ</li>\n    <li>Offers supportive feedback and replay</li>\n  </ul>\n  <p class=\"file-path\">üìÅ File: quiz.qmd</p>\n  <p class=\"file-path\">üéâ Library: canvas-confetti</p>\n</div>\n\n<div class=\"section-break\"></div>\n\n## Tools and Technology\n\nWe stitched this project together with care ‚Äî and code:\n\n<div class=\"method-box\">\n  <h4>Tech Stack</h4>\n  <ul>\n    <li><strong>Languages</strong>: Python + R + JavaScript</li>\n    <li><strong>Python</strong>: Altair, Pandas, Folium, GeoPandas, SciPy, Statsmodels</li>\n    <li><strong>R</strong>: <code>glmnet</code>, <code>MASS</code>, <code>ggplot2</code></li>\n    <li><strong>JS</strong>: D3.js, plain DOM scripting</li>\n  </ul>\n</div>\n\n<div class=\"qr-container\">\n  <img src=\"assets/images/qr_code.jpg\" alt=\"QR code to open dashboard\">\n  <p>Scan to access the live dashboard and explore the story yourself.</p>\n</div>"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":false,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"kernel":"hw3env","engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles/custom.css","styles/dashboard-page.css","styles/about-page.css"],"toc":true,"toc-depth":3,"embed-resources":true,"self-contained":true,"include-in-header":{"text":"<script src=\"https://cdn.jsdelivr.net/npm/vega@5\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/vega-lite@5\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/vega-embed@6\"></script>\n<style>\n  /* Critical styles for visualization containers */\n  .chart-container {\n    width: 100%;\n    height: 550px;\n    min-height: 400px;\n    margin: 1.5rem 0;\n  }\n\n  .iframe-container {\n    width: 100%;\n    height: 650px;\n    margin: 1.5rem 0;\n    border: 1px solid #eaeaea;\n    border-radius: 8px;\n    overflow: hidden;\n  }\n\n  .iframe-container iframe {\n    width: 100% !important;\n    height: 100% !important;\n    border: none;\n  }\n\n  .vega-embed {\n    width: 100%;\n    height: 100%;\n  }\n\n  .iframe-viz {\n    width: 100%;\n    height: 500px;\n    border: none;\n    overflow: hidden;\n  }\n</style>\n"},"output-file":"methods.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"Search...","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.40","resources":["documentation/311_full_paper.pdf","js/resolution_map.js","js/quiz.js","js/d3.v7.js","js/gallery.js","!data/311_map_data.csv","data/neighborhood_income_centroids.csv","data/SF_Find_Neighborhoods_2025.geojson","data/data_gallery_info.json","assets/images/","outputs/","includes/footer.html","styles/","scripts/copy_large_data.sh"],"theme":"flatly","highlight":"tango","code-summary":"Show code","title":"Methods"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}